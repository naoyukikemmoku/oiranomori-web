# おいらの森 HP リニューアル:As-Is To-Be 移行計画

> **このファイルの目的**  
> ChatGPT Codex、Gemini Pro、Claude Pro等のAIに参照させる前提条件ファイル。  
> GitHubリポジトリの `_references/` または `/docs/` に配置し、コード生成・レビュー時に参照させる。

——

## 前提:開発環境とAI活用方針

### 現在の開発環境

- **エディタ**: VS Code (メイン開発)、Working Copy (iOS/モバイル環境でのGit操作)
- **フレームワーク**: Astro (静的サイト生成)
- **CMS**: microCMS (お知らせ等の動的コンテンツ管理)
- **ホスティング**: Cloudflare Pages
- **バージョン管理**: GitHub
- **CDN/ストレージ**: Cloudflare R2、Cloudflare Images

### AI活用の基本方針

- **コーディング支援**: ChatGPT Codex、Gemini Pro、Claude Proを活用
- **従来の課題**: WordPressプラグイン依存でコードが肥大化・複雑化していた
- **新方針**: AIによるクリーンなコード生成で、保守性の高いシンプルな実装を目指す
- **AI参照ファイル**: 本ファイルを含む `_references/` 配下のMarkdownファイルをAIに読み込ませて開発を進める

——

## サイト基盤

|項目        |As-Is(現状)                                  |To-Be(目標)                                           |差分(何が変わる)                          |移行ステップ(やる順)                              |
|-———|-——————————————|-—————————————————|————————————|——————————————|
|**サイト基盤** |WordPress(CMS) + 有料テーマ The Mounty + プラグイン多数|Astro(静的生成) + Cloudflare Pages + VS Code開発環境        |「動的CMS + プラグイン依存」→「静的生成 + AIコーディング」|①現行URL棚卸し→②新IA設計→③Astroひな形作成→④Pagesに仮デプロイ|
|**コーディング**|WordPressプラグインで機能実装(コード肥大化)                |AI(ChatGPT Codex/Gemini Pro/Claude Pro)によるクリーンなコード生成|「プラグイン依存」→「カスタムコード + AI支援」         |①必要機能の洗い出し→②AI用プロンプト設計→③コード生成→④レビュー&リファクタ|

——

## 情報構造

|項目      |As-Is(現状)   |To-Be(目標)        |差分(何が変わる) |移行ステップ(やる順)                                  |
|———|————|——————|-———|———————————————|
|**情報構造**|コンテンツ過多・階層複雑|“芯”だけに整理(放置できる構造)|ページ数/導線を削る|①残す/捨てる/統合の判定→②新サイトマップ作成→③既存URLと対応表(リダイレクト台帳)|

——

## SEO/URL

|項目         |As-Is(現状)                  |To-Be(目標)                        |差分(何が変わる)    |移行ステップ(やる順)                                   |
|————|—————————|———————————|-————|-———————————————|
|**SEO/URL**|旧予約リンク残存(レゼルバ等)、サイトマップ重複の懸念|URLをできるだけ維持 + 変更は301で吸収、サイトマップ一本化|“整理しながらも資産維持”|①現行URL一覧抽出→②To-Be URL決定→③301マップ作成→④サーチコンソールで検証|

——

## 記事/お知らせ

|項目         |As-Is(現状)               |To-Be(目標)                           |差分(何が変わる)                  |移行ステップ(やる順)                                          |
|————|————————|————————————|—————————|——————————————————|
|**記事/お知らせ**|WordPress投稿(または固定ページ)で更新|**microCMS**(お知らせ・最新情報管理) + Astroで表示|更新口をWordPressから分離、ヘッドレスCMS化|①必要なデータ項目定義→②microCMS作成→③Astroで一覧/詳細実装→④旧投稿の移行(必要分だけ)|

**補足**: お知らせ、営業情報、イベント告知などの最新情報はすべてmicroCMSで管理し、Astroでフェッチして表示する。

——

## 画像(通常)

|項目        |As-Is(現状)            |To-Be(目標)                 |差分(何が変わる)    |移行ステップ(やる順)                      |
|-———|———————|—————————|-————|———————————|
|**画像(通常)**|WordPressメディアライブラリに混在|CDN(Cloudflare Images等)で配信|画像の置き場が分離・高速化|①必要画像を確定→②CDNに配置→③Astro側で参照URLに置換|

——

## 定点写真(履歴)

|項目          |As-Is(現状)|To-Be(目標)                       |差分(何が変わる)        |移行ステップ(やる順)                                        |
|————|———|———————————|——————|—————————————————|
|**定点写真(履歴)**|なし(新規要件) |R2(倉庫) + CDN配信 + index.jsonで履歴表示|“自動で増える画像”専用ルート追加|①保存命名規則決める→②latest + 履歴保存→③index.json生成→④ギャラリーページ実装|

——

## サイネージ

|項目       |As-Is(現状)|To-Be(目標)                    |差分(何が変わる)|移行ステップ(やる順)                         |
|———|———|——————————|———|————————————|
|**サイネージ**|なし(新規要件) |Webサイネージ(Pages上の専用URLをキオスク表示)|“現地表示”が追加|①サイネージ用ページ作成→②端末キオスク設定→③更新頻度/キャッシュ設計|

——

## 混雑カレンダー(元データ)

|項目               |As-Is(現状)          |To-Be(目標)                    |差分(何が変わる)         |移行ステップ(やる順)                                        |
|——————|-——————|——————————|——————|—————————————————|
|**混雑カレンダー(元データ)**|ねっぱん上に存在、外部取り出しは未整備|ねっぱん→CSV→RPA(ルートC)→集計→公開用(匿名)|自動取得・匿名加工のパイプライン追加|①CSV出力手順固定→②RPAでDL自動化→③集計ロジック→④microCMS反映 or JSON配置|

——

## “空き状況”公開

|項目          |As-Is(現状)|To-Be(目標)               |差分(何が変わる)     |移行ステップ(やる順)                            |
|————|———|————————|—————|—————————————|
|**“空き状況”公開**|出したいが未実装 |「誰は出さない」「空き/予約あり/停止」だけ公開|プライバシー配慮した公開設計|①公開ルール確定→②表示UI(色/凡例/注意書き)→③更新時刻表示→④遅延設定|

——

## SNS/日々投稿

|項目          |As-Is(現状)|To-Be(目標)                  |差分(何が変わる)  |移行ステップ(やる順)                      |
|————|———|—————————|————|———————————|
|**SNS/日々投稿**|HP側にも載せがち|Instagram/Note中心、HPは導線/まとめ役|更新の主戦場が外へ移る|①HPにSNS導線/埋め込み→②HP側の更新項目を最小化(固定化)|

——

## ホスティング/運用

|項目           |As-Is(現状)                             |To-Be(目標)                                               |差分(何が変わる)            |移行ステップ(やる順)                           |
|-————|—————————————|———————————————————|———————|—————————————|
|**ホスティング/運用**|レンタルサーバー + WordPress保守(更新/脆弱性/プラグイン管理)|Cloudflare Pages中心で保守激減(ビルド運用)、Working Copy/VS Codeでデプロイ|“保守コスト”が大幅減、Gitベースの運用|①運用フロー決め(誰がいつ何を更新)→②デプロイ手順固定→③障害時の戻し手順|

——

## 計測

|項目    |As-Is(現状)           |To-Be(目標)     |差分(何が変わる)|移行ステップ(やる順)             |
|——|———————|—————|———|————————|
|**計測**|WordPressプラグインで混在しがち|解析は必要最小限(GA4等)|計測の整理    |①必要計測の定義→②タグ実装→③移行後に計測確認|

——

## 公開切替

|項目      |As-Is(現状)|To-Be(目標)|差分(何が変わる)|移行ステップ(やる順)                              |
|———|———|———|———|——————————————|
|**公開切替**|同一基盤上で改修 |新旧並走→切替  |ダウンタイム回避 |①新サイトを別環境で完成→②DNS/ルーティング切替→③301適用→④監視/微修正|

——

## AIコーディング時の参照ポイント

このファイルをAIに読み込ませる際、以下を明示してください:

1. **技術スタック**: Astro + microCMS + Cloudflare Pages
1. **開発環境**: VS Code(メイン)、Working Copy(モバイル)
1. **コード方針**: シンプル・保守性重視、プラグイン依存を排除
1. **CMS連携**: お知らせ等の動的コンテンツはmicroCMS APIで取得
1. **画像管理**: Cloudflare Images/R2を活用
1. **デプロイ**: GitHub連携でPages自動デプロイ

これにより、AIは適切な技術選択とコード生成を行えます。