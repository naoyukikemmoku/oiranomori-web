---
// カテゴリ別メニュー構造
const menuGroups = [
  {
    title: "予約・会員",
    items: [
      { label: "予約する", href: "https://www.489pro-x.com/ja/s/oiranomori/planlist/", external: true, active: true },
      { label: "予約ガイド", href: "/reservation-guide/", active: false },
      { label: "ご予約確認", href: "https://www.489pro-x.com/ja/s/oiranomori/booking/login/", external: true, active: true },
      { label: "会員ログイン", href: "https://www.489pro-x.com/ja/s/oiranomori/member/login/", external: true, active: true },
      { label: "新規会員登録", href: "https://www.489pro-x.com/ja/s/oiranomori/member/input/", external: true, active: true },
      { label: "チェックアウトの連絡", href: "/checkout/", active: false },
    ],
  },
  {
    title: "フィールド案内",
    items: [
      { label: "森のいま", href: "/now/", active: false },
      { label: "ライトフォレスト 利用案内", href: "/light-guide/", active: false },
      { label: "ディープフォレスト 利用案内", href: "/deep-guide/", active: false },
      { label: "場内マップ(Light)", href: "/access/#light", active: false },
      { label: "場内マップ(Deep)", href: "/access/#deep", active: false },
      { label: "周辺案内", href: "/access/#area", active: false },
      { label: "アクセス", href: "/access/", active: true },
    ],
  },
  {
    title: "薪・レンタル・チケット",
    items: [
      { label: "おいらの薪", href: "/firewood/", active: false },
      { label: "レンタル・売店", href: "/firewood/#rental", active: false },
      { label: "年間パスポート・回数券", href: "/passport/", active: false },
    ],
  },
  {
    title: "森を体験する",
    items: [
      { label: "過ごし方", href: "/experience/", active: false },
      { label: "焚火のすすめ", href: "/experience/#bonfire", active: false },
      { label: "全てのキャンププラン", href: "/experience/#plans", active: false },
    ],
  },
  {
    title: "森の物語・記録",
    items: [
      { label: "森 of the Story", href: "https://note.com/oiranomori", external: true, active: true },
      { label: "開拓日誌", href: "https://note.com/oiranomori/m/m7c8e8e8e8e8e", external: true, active: false },
      { label: "生きもの観察記録", href: "https://note.com/oiranomori/m/m9c9e9e9e9e9e", external: true, active: false },
      { label: "おすすめキャンプ場", href: "https://note.com/oiranomori/m/m1c1e1e1e1e1e", external: true, active: false },
    ],
  },
  {
    title: "サポート",
    items: [
      { label: "お知らせ", href: "/news/", active: false },
      { label: "お問い合わせ", href: "/contact/", active: false },
      { label: "よくある質問", href: "/faq/", active: false },
      { label: "キャンセルポリシー", href: "/reservation-guide/#cancellation", active: false },
      { label: "利用規約", href: "/policy/#terms", active: false },
      { label: "プライバシーポリシー", href: "/policy/#privacy", active: false },
    ],
  },
];
---

<div class="dropdown dropdown-end">
  <button class="btn btn-outline btn-sm flex items-center justify-center" aria-label="メニュー">
    <!-- 横3本線アイコン -->
    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 4h16M2 10h16M2 16h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>

  <div class="dropdown-content mt-2 w-80 max-w-[90vw] max-h-[80vh] overflow-y-auto rounded-box bg-base-100 shadow-xl border border-base-300">
    <div class="p-4 grid gap-6">
      {menuGroups.map((group) => (
        <section>
          <p class="text-xs font-semibold opacity-70 mb-2 uppercase tracking-wider">{group.title}</p>
          <div class="grid gap-1">
            {group.items.map((item) => (
              item.active ? (
                <a 
                  class="btn btn-ghost btn-sm justify-start text-left" 
                  href={item.href}
                  target={item.external ? "_blank" : undefined}
                  rel={item.external ? "noreferrer" : undefined}
                >
                  {item.label}
                  {item.external && (
                    <svg class="w-3 h-3 ml-1 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                    </svg>
                  )}
                </a>
              ) : (
                <span class="btn btn-ghost btn-sm justify-start text-left opacity-40 pointer-events-none">
                  {item.label}
                  <span class="text-xs ml-2">(準備中)</span>
                </span>
              )
            ))}
          </div>
        </section>
      ))}
    </div>
  </div>
</div>
